<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_18) on Sun May 03 20:19:35 CST 2015 -->
<TITLE>
FSEditLog (Hadoop-Hdfs 0.22.1-SNAPSHOT API)
</TITLE>

<META NAME="date" CONTENT="2015-05-03">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FSEditLog (Hadoop-Hdfs 0.22.1-SNAPSHOT API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="跳过导航链接"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>概述</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>软件包</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>类</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FSEditLog.html"><FONT CLASS="NavBarFont1"><B>使用</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>树</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>已过时</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>索引</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>帮助</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSClusterStats.html" title="org.apache.hadoop.hdfs.server.namenode 中的接口"><B>上一个类</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLogLoader.html" title="org.apache.hadoop.hdfs.server.namenode 中的类"><B>下一个类</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/FSEditLog.html" target="_top"><B>框架</B></A>  &nbsp;
&nbsp;<A HREF="FSEditLog.html" target="_top"><B>无框架</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>所有类</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  摘要：&nbsp;嵌套&nbsp;|&nbsp;字段&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<A HREF="#method_summary">方法</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
详细信息：&nbsp;字段&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<A HREF="#method_detail">方法</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.hadoop.hdfs.server.namenode</FONT>
<BR>
类 FSEditLog</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="继承者 "><B>org.apache.hadoop.hdfs.server.namenode.FSEditLog</B>
</PRE>
<HR>
<DL>
<DT><PRE><FONT SIZE="-1">@InterfaceAudience.Private
@InterfaceStability.Evolving
</FONT>public class <B>FSEditLog</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
FSEditLog maintains a log of the namespace modifications.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>方法摘要</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.Iterator&lt;org.apache.hadoop.hdfs.server.namenode.EditLogOutputStream&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html#getOutputStreamIterator(org.apache.hadoop.hdfs.server.namenode.JournalStream.JournalType)">getOutputStreamIterator</A></B>(<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalStream.JournalType.html" title="org.apache.hadoop.hdfs.server.namenode 中的枚举">JournalStream.JournalType</A>&nbsp;streamType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get stream iterator for the specified type.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html#logCloseFile(java.lang.String, org.apache.hadoop.hdfs.server.namenode.INodeFile)">logCloseFile</A></B>(java.lang.String&nbsp;path,
             org.apache.hadoop.hdfs.server.namenode.INodeFile&nbsp;newNode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modified by tony 2014/4/3
 Add close lease record to edit log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html#logMkDir(java.lang.String, org.apache.hadoop.hdfs.server.namenode.INode)">logMkDir</A></B>(java.lang.String&nbsp;path,
         org.apache.hadoop.hdfs.server.namenode.INode&nbsp;newNode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add create directory record to edit log</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html#logOpenFile(java.lang.String, org.apache.hadoop.hdfs.server.namenode.INodeFileUnderConstruction)">logOpenFile</A></B>(java.lang.String&nbsp;path,
            org.apache.hadoop.hdfs.server.namenode.INodeFileUnderConstruction&nbsp;newNode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Add open lease record to edit log.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html#logSync()">logSync</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sync all modifications done by this thread.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLog.html#setBufferCapacity(int)">setBufferCapacity</A></B>(int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>从类 java.lang.Object 继承的方法</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>方法详细信息</B></FONT></TH>
</TR>
</TABLE>

<A NAME="logSync()"><!-- --></A><H3>
logSync</H3>
<PRE>
public void <B>logSync</B>()</PRE>
<DL>
<DD>Sync all modifications done by this thread.

 The internal concurrency design of this class is as follows:
   - Log items are written synchronized into an in-memory buffer,
     and each assigned a transaction ID.
   - When a thread (client) would like to sync all of its edits, logSync()
     uses a ThreadLocal transaction ID to determine what edit number must
     be synced to.
   - The isSyncRunning volatile boolean tracks whether a sync is currently
     under progress.

 The data is double-buffered within each edit log implementation so that
 in-memory writing can occur in parallel with the on-disk writing.

 Each sync occurs in three steps:
   1. synchronized, it swaps the double buffer and sets the isSyncRunning
      flag.
   2. unsynchronized, it flushes the data to storage
   3. synchronized, it resets the flag and notifies anyone waiting on the
      sync.

 The lack of synchronization on step 2 allows other threads to continue
 to write into the memory buffer while the sync is in progress.
 Because this step is unsynchronized, actions that need to avoid
 concurrency with sync() should be synchronized and also call
 waitForSyncToFinish() before assuming they are running alone.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="logOpenFile(java.lang.String, org.apache.hadoop.hdfs.server.namenode.INodeFileUnderConstruction)"><!-- --></A><H3>
logOpenFile</H3>
<PRE>
public void <B>logOpenFile</B>(java.lang.String&nbsp;path,
                        org.apache.hadoop.hdfs.server.namenode.INodeFileUnderConstruction&nbsp;newNode)</PRE>
<DL>
<DD>Add open lease record to edit log. 
 Records the block locations of the last block.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="logCloseFile(java.lang.String, org.apache.hadoop.hdfs.server.namenode.INodeFile)"><!-- --></A><H3>
logCloseFile</H3>
<PRE>
public void <B>logCloseFile</B>(java.lang.String&nbsp;path,
                         org.apache.hadoop.hdfs.server.namenode.INodeFile&nbsp;newNode)</PRE>
<DL>
<DD>modified by tony 2014/4/3
 Add close lease record to edit log.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="logMkDir(java.lang.String, org.apache.hadoop.hdfs.server.namenode.INode)"><!-- --></A><H3>
logMkDir</H3>
<PRE>
public void <B>logMkDir</B>(java.lang.String&nbsp;path,
                     org.apache.hadoop.hdfs.server.namenode.INode&nbsp;newNode)</PRE>
<DL>
<DD>Add create directory record to edit log
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setBufferCapacity(int)"><!-- --></A><H3>
setBufferCapacity</H3>
<PRE>
public void <B>setBufferCapacity</B>(int&nbsp;size)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getOutputStreamIterator(org.apache.hadoop.hdfs.server.namenode.JournalStream.JournalType)"><!-- --></A><H3>
getOutputStreamIterator</H3>
<PRE>
public java.util.Iterator&lt;org.apache.hadoop.hdfs.server.namenode.EditLogOutputStream&gt; <B>getOutputStreamIterator</B>(<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/JournalStream.JournalType.html" title="org.apache.hadoop.hdfs.server.namenode 中的枚举">JournalStream.JournalType</A>&nbsp;streamType)</PRE>
<DL>
<DD>Get stream iterator for the specified type.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="跳过导航链接"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>概述</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>软件包</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>类</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/FSEditLog.html"><FONT CLASS="NavBarFont1"><B>使用</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>树</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>已过时</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>索引</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>帮助</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSClusterStats.html" title="org.apache.hadoop.hdfs.server.namenode 中的接口"><B>上一个类</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/namenode/FSEditLogLoader.html" title="org.apache.hadoop.hdfs.server.namenode 中的类"><B>下一个类</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hadoop/hdfs/server/namenode/FSEditLog.html" target="_top"><B>框架</B></A>  &nbsp;
&nbsp;<A HREF="FSEditLog.html" target="_top"><B>无框架</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>所有类</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  摘要：&nbsp;嵌套&nbsp;|&nbsp;字段&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<A HREF="#method_summary">方法</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
详细信息：&nbsp;字段&nbsp;|&nbsp;构造方法&nbsp;|&nbsp;<A HREF="#method_detail">方法</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2009 The Apache Software Foundation
</BODY>
</HTML>
