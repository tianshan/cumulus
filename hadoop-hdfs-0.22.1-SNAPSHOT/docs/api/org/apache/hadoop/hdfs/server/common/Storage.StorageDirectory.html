<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_18) on Sun May 03 20:19:34 CST 2015 -->
<TITLE>
Storage.StorageDirectory (Hadoop-Hdfs 0.22.1-SNAPSHOT API)
</TITLE>

<META NAME="date" CONTENT="2015-05-03">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Storage.StorageDirectory (Hadoop-Hdfs 0.22.1-SNAPSHOT API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="跳过导航链接"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>概述</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>软件包</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>类</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Storage.StorageDirectory.html"><FONT CLASS="NavBarFont1"><B>使用</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>树</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>已过时</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>索引</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>帮助</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="org.apache.hadoop.hdfs.server.common 中的类"><B>上一个类</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirType.html" title="org.apache.hadoop.hdfs.server.common 中的接口"><B>下一个类</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" target="_top"><B>框架</B></A>  &nbsp;
&nbsp;<A HREF="Storage.StorageDirectory.html" target="_top"><B>无框架</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>所有类</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  摘要：&nbsp;嵌套&nbsp;|&nbsp;字段&nbsp;|&nbsp;<A HREF="#constructor_summary">构造方法</A>&nbsp;|&nbsp;<A HREF="#method_summary">方法</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
详细信息：&nbsp;字段&nbsp;|&nbsp;<A HREF="#constructor_detail">构造方法</A>&nbsp;|&nbsp;<A HREF="#method_detail">方法</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.apache.hadoop.hdfs.server.common</FONT>
<BR>
类 Storage.StorageDirectory</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="继承者 "><B>org.apache.hadoop.hdfs.server.common.Storage.StorageDirectory</B>
</PRE>
<DL>
<DT><B>正在封闭类：</B><DD><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="org.apache.hadoop.hdfs.server.common 中的类">Storage</A></DD>
</DL>
<HR>
<DL>
<DT><PRE><FONT SIZE="-1">@InterfaceAudience.Private
</FONT>public class <B>Storage.StorageDirectory</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
One of the storage directories.
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>构造方法摘要</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#Storage.StorageDirectory(java.io.File)">Storage.StorageDirectory</A></B>(java.io.File&nbsp;dir)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#Storage.StorageDirectory(java.io.File, org.apache.hadoop.hdfs.server.common.Storage.StorageDirType)">Storage.StorageDirectory</A></B>(java.io.File&nbsp;dir,
                         <A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirType.html" title="org.apache.hadoop.hdfs.server.common 中的接口">Storage.StorageDirType</A>&nbsp;dirType)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>方法摘要</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="org.apache.hadoop.hdfs.server.common 中的枚举">Storage.StorageState</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#analyzeStorage(org.apache.hadoop.hdfs.server.common.HdfsConstants.StartupOption)">analyzeStorage</A></B>(<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsConstants.StartupOption.html" title="org.apache.hadoop.hdfs.server.common 中的枚举">HdfsConstants.StartupOption</A>&nbsp;startOpt)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check consistency of the storage directory</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#clearDirectory()">clearDirectory</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clear and re-create storage directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#doRecover(org.apache.hadoop.hdfs.server.common.Storage.StorageState)">doRecover</A></B>(<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="org.apache.hadoop.hdfs.server.common 中的枚举">Storage.StorageState</A>&nbsp;curState)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Complete or recover storage state from previously failed transition.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getCurrentDir()">getCurrentDir</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Directory <code>current</code> contains latest files defining
 the file system meta-data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getFinalizedTmp()">getFinalizedTmp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>finalized.tmp</code> is a transient directory, which holds
 the <code>previous</code> file system state while it is being removed
 in response to the finalize request.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getLastCheckpointTmp()">getLastCheckpointTmp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>lastcheckpoint.tmp</code> is a transient directory, which holds
 current file system state while the new state is saved into the new
 <code>current</code> during regular namespace updates.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getPreviousCheckpoint()">getPreviousCheckpoint</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>previous.checkpoint</code> is a directory, which holds the previous
 (before the last save) state of the storage directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getPreviousDir()">getPreviousDir</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Directory <code>previous</code> contains the previous file system state,
 which the system can be rolled back to.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getPreviousTmp()">getPreviousTmp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>previous.tmp</code> is a transient directory, which holds
 current file system state while the new state is saved into the new
 <code>current</code> during upgrade.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getPreviousVersionFile()">getPreviousVersionFile</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File <code>VERSION</code> from the <code>previous</code> directory.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getRemovedTmp()">getRemovedTmp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<code>removed.tmp</code> is a transient directory, which holds
 current file system state while the previous state is moved into
 <code>current</code> during rollback.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getRoot()">getRoot</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get root directory of this storage</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirType.html" title="org.apache.hadoop.hdfs.server.common 中的接口">Storage.StorageDirType</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getStorageDirType()">getStorageDirType</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get storage directory type</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.io.File</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#getVersionFile()">getVersionFile</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File <code>VERSION</code> contains the following fields:
 
 node type
 layout version
 namespaceID
 fs state creation time
 other fields specific for this node type
 
 The version file is always written last during storage directory updates.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#lock()">lock</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lock storage to provide exclusive access.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#read()">read</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Read version file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#read(java.io.File)">read</A></B>(java.io.File&nbsp;from)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#unlock()">unlock</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unlock storage.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#write()">write</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Write version file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html#write(java.io.File)">write</A></B>(java.io.File&nbsp;to)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>从类 java.lang.Object 继承的方法</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>构造方法详细信息</B></FONT></TH>
</TR>
</TABLE>

<A NAME="Storage.StorageDirectory(java.io.File)"><!-- --></A><H3>
Storage.StorageDirectory</H3>
<PRE>
public <B>Storage.StorageDirectory</B>(java.io.File&nbsp;dir)</PRE>
<DL>
</DL>
<HR>

<A NAME="Storage.StorageDirectory(java.io.File, org.apache.hadoop.hdfs.server.common.Storage.StorageDirType)"><!-- --></A><H3>
Storage.StorageDirectory</H3>
<PRE>
public <B>Storage.StorageDirectory</B>(java.io.File&nbsp;dir,
                                <A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirType.html" title="org.apache.hadoop.hdfs.server.common 中的接口">Storage.StorageDirType</A>&nbsp;dirType)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>方法详细信息</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getRoot()"><!-- --></A><H3>
getRoot</H3>
<PRE>
public java.io.File <B>getRoot</B>()</PRE>
<DL>
<DD>Get root directory of this storage
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStorageDirType()"><!-- --></A><H3>
getStorageDirType</H3>
<PRE>
public <A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirType.html" title="org.apache.hadoop.hdfs.server.common 中的接口">Storage.StorageDirType</A> <B>getStorageDirType</B>()</PRE>
<DL>
<DD>Get storage directory type
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="read()"><!-- --></A><H3>
read</H3>
<PRE>
public void <B>read</B>()
          throws java.io.IOException</PRE>
<DL>
<DD>Read version file.
<P>
<DD><DL>

<DT><B>抛出：</B>
<DD><CODE>java.io.IOException</CODE> - if file cannot be read or contains inconsistent data</DL>
</DD>
</DL>
<HR>

<A NAME="read(java.io.File)"><!-- --></A><H3>
read</H3>
<PRE>
public void <B>read</B>(java.io.File&nbsp;from)
          throws java.io.IOException</PRE>
<DL>
<DD><DL>

<DT><B>抛出：</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="write()"><!-- --></A><H3>
write</H3>
<PRE>
public void <B>write</B>()
           throws java.io.IOException</PRE>
<DL>
<DD>Write version file.
<P>
<DD><DL>

<DT><B>抛出：</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="write(java.io.File)"><!-- --></A><H3>
write</H3>
<PRE>
public void <B>write</B>(java.io.File&nbsp;to)
           throws java.io.IOException</PRE>
<DL>
<DD><DL>

<DT><B>抛出：</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="clearDirectory()"><!-- --></A><H3>
clearDirectory</H3>
<PRE>
public void <B>clearDirectory</B>()
                    throws java.io.IOException</PRE>
<DL>
<DD>Clear and re-create storage directory.
 <p>
 Removes contents of the current directory and creates an empty directory.
 
 This does not fully format storage directory. 
 It cannot write the version file since it should be written last after  
 all other storage type dependent files are written.
 Derived storage is responsible for setting specific storage values and
 writing the version file to disk.
<P>
<DD><DL>

<DT><B>抛出：</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getCurrentDir()"><!-- --></A><H3>
getCurrentDir</H3>
<PRE>
public java.io.File <B>getCurrentDir</B>()</PRE>
<DL>
<DD>Directory <code>current</code> contains latest files defining
 the file system meta-data.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the directory path</DL>
</DD>
</DL>
<HR>

<A NAME="getVersionFile()"><!-- --></A><H3>
getVersionFile</H3>
<PRE>
public java.io.File <B>getVersionFile</B>()</PRE>
<DL>
<DD>File <code>VERSION</code> contains the following fields:
 <ol>
 <li>node type</li>
 <li>layout version</li>
 <li>namespaceID</li>
 <li>fs state creation time</li>
 <li>other fields specific for this node type</li>
 </ol>
 The version file is always written last during storage directory updates.
 The existence of the version file indicates that all other files have
 been successfully written in the storage directory, the storage is valid
 and does not need to be recovered.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the version file path</DL>
</DD>
</DL>
<HR>

<A NAME="getPreviousVersionFile()"><!-- --></A><H3>
getPreviousVersionFile</H3>
<PRE>
public java.io.File <B>getPreviousVersionFile</B>()</PRE>
<DL>
<DD>File <code>VERSION</code> from the <code>previous</code> directory.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the previous version file path</DL>
</DD>
</DL>
<HR>

<A NAME="getPreviousDir()"><!-- --></A><H3>
getPreviousDir</H3>
<PRE>
public java.io.File <B>getPreviousDir</B>()</PRE>
<DL>
<DD>Directory <code>previous</code> contains the previous file system state,
 which the system can be rolled back to.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the directory path</DL>
</DD>
</DL>
<HR>

<A NAME="getPreviousTmp()"><!-- --></A><H3>
getPreviousTmp</H3>
<PRE>
public java.io.File <B>getPreviousTmp</B>()</PRE>
<DL>
<DD><code>previous.tmp</code> is a transient directory, which holds
 current file system state while the new state is saved into the new
 <code>current</code> during upgrade.
 If the saving succeeds <code>previous.tmp</code> will be moved to
 <code>previous</code>, otherwise it will be renamed back to 
 <code>current</code> by the recovery procedure during startup.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the directory path</DL>
</DD>
</DL>
<HR>

<A NAME="getRemovedTmp()"><!-- --></A><H3>
getRemovedTmp</H3>
<PRE>
public java.io.File <B>getRemovedTmp</B>()</PRE>
<DL>
<DD><code>removed.tmp</code> is a transient directory, which holds
 current file system state while the previous state is moved into
 <code>current</code> during rollback.
 If the moving succeeds <code>removed.tmp</code> will be removed,
 otherwise it will be renamed back to 
 <code>current</code> by the recovery procedure during startup.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the directory path</DL>
</DD>
</DL>
<HR>

<A NAME="getFinalizedTmp()"><!-- --></A><H3>
getFinalizedTmp</H3>
<PRE>
public java.io.File <B>getFinalizedTmp</B>()</PRE>
<DL>
<DD><code>finalized.tmp</code> is a transient directory, which holds
 the <code>previous</code> file system state while it is being removed
 in response to the finalize request.
 Finalize operation will remove <code>finalized.tmp</code> when completed,
 otherwise the removal will resume upon the system startup.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the directory path</DL>
</DD>
</DL>
<HR>

<A NAME="getLastCheckpointTmp()"><!-- --></A><H3>
getLastCheckpointTmp</H3>
<PRE>
public java.io.File <B>getLastCheckpointTmp</B>()</PRE>
<DL>
<DD><code>lastcheckpoint.tmp</code> is a transient directory, which holds
 current file system state while the new state is saved into the new
 <code>current</code> during regular namespace updates.
 If the saving succeeds <code>lastcheckpoint.tmp</code> will be moved to
 <code>previous.checkpoint</code>, otherwise it will be renamed back to 
 <code>current</code> by the recovery procedure during startup.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the directory path</DL>
</DD>
</DL>
<HR>

<A NAME="getPreviousCheckpoint()"><!-- --></A><H3>
getPreviousCheckpoint</H3>
<PRE>
public java.io.File <B>getPreviousCheckpoint</B>()</PRE>
<DL>
<DD><code>previous.checkpoint</code> is a directory, which holds the previous
 (before the last save) state of the storage directory.
 The directory is created as a reference only, it does not play role
 in state recovery procedures, and is recycled automatically, 
 but it may be useful for manual recovery of a stale state of the system.
<P>
<DD><DL>

<DT><B>返回：</B><DD>the directory path</DL>
</DD>
</DL>
<HR>

<A NAME="analyzeStorage(org.apache.hadoop.hdfs.server.common.HdfsConstants.StartupOption)"><!-- --></A><H3>
analyzeStorage</H3>
<PRE>
public <A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="org.apache.hadoop.hdfs.server.common 中的枚举">Storage.StorageState</A> <B>analyzeStorage</B>(<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/HdfsConstants.StartupOption.html" title="org.apache.hadoop.hdfs.server.common 中的枚举">HdfsConstants.StartupOption</A>&nbsp;startOpt)
                                    throws java.io.IOException</PRE>
<DL>
<DD>Check consistency of the storage directory
<P>
<DD><DL>
<DT><B>参数：</B><DD><CODE>startOpt</CODE> - a startup option.
<DT><B>返回：</B><DD>state <A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="org.apache.hadoop.hdfs.server.common 中的枚举"><CODE>Storage.StorageState</CODE></A> of the storage directory
<DT><B>抛出：</B>
<DD><CODE><A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/InconsistentFSStateException.html" title="org.apache.hadoop.hdfs.server.common 中的类">InconsistentFSStateException</A></CODE> - if directory state is not 
 consistent and cannot be recovered.
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="doRecover(org.apache.hadoop.hdfs.server.common.Storage.StorageState)"><!-- --></A><H3>
doRecover</H3>
<PRE>
public void <B>doRecover</B>(<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageState.html" title="org.apache.hadoop.hdfs.server.common 中的枚举">Storage.StorageState</A>&nbsp;curState)
               throws java.io.IOException</PRE>
<DL>
<DD>Complete or recover storage state from previously failed transition.
<P>
<DD><DL>
<DT><B>参数：</B><DD><CODE>curState</CODE> - specifies what/how the state should be recovered
<DT><B>抛出：</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="lock()"><!-- --></A><H3>
lock</H3>
<PRE>
public void <B>lock</B>()
          throws java.io.IOException</PRE>
<DL>
<DD>Lock storage to provide exclusive access.
 
 <p> Locking is not supported by all file systems.
 E.g., NFS does not consistently support exclusive locks.
 
 <p> If locking is supported we guarantee exculsive access to the
 storage directory. Otherwise, no guarantee is given.
<P>
<DD><DL>

<DT><B>抛出：</B>
<DD><CODE>java.io.IOException</CODE> - if locking fails</DL>
</DD>
</DL>
<HR>

<A NAME="unlock()"><!-- --></A><H3>
unlock</H3>
<PRE>
public void <B>unlock</B>()
            throws java.io.IOException</PRE>
<DL>
<DD>Unlock storage.
<P>
<DD><DL>

<DT><B>抛出：</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="跳过导航链接"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>概述</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>软件包</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>类</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/Storage.StorageDirectory.html"><FONT CLASS="NavBarFont1"><B>使用</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>树</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>已过时</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>索引</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>帮助</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.html" title="org.apache.hadoop.hdfs.server.common 中的类"><B>上一个类</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../org/apache/hadoop/hdfs/server/common/Storage.StorageDirType.html" title="org.apache.hadoop.hdfs.server.common 中的接口"><B>下一个类</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?org/apache/hadoop/hdfs/server/common/Storage.StorageDirectory.html" target="_top"><B>框架</B></A>  &nbsp;
&nbsp;<A HREF="Storage.StorageDirectory.html" target="_top"><B>无框架</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>所有类</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>所有类</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  摘要：&nbsp;嵌套&nbsp;|&nbsp;字段&nbsp;|&nbsp;<A HREF="#constructor_summary">构造方法</A>&nbsp;|&nbsp;<A HREF="#method_summary">方法</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
详细信息：&nbsp;字段&nbsp;|&nbsp;<A HREF="#constructor_detail">构造方法</A>&nbsp;|&nbsp;<A HREF="#method_detail">方法</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &copy; 2009 The Apache Software Foundation
</BODY>
</HTML>
